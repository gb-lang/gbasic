// Flappy Bird â€” tap space to flap, avoid pipes

let bird = circle(15)
bird.position = Point(100, 300)
bird.color = yellow
bird.gravity = 0.5

let score = 0
let pipe_x = 800.0
let gap_y = 250
let pipe_speed = 3.0
let passed = false

while true {
    if key("space") {
        bird.velocity.y = -8
        play("flap")
    }

    // Move pipe left
    pipe_x = pipe_x - pipe_speed
    if pipe_x < -60 {
        pipe_x = 800.0
        gap_y = random(100, 400)
        passed = false
    }

    // Score when passing pipe
    if pipe_x < 100 and not passed {
        score = score + 1
        passed = true
    }

    // Bird hits ground or ceiling
    if bird.position.y > 580 or bird.position.y < 0 {
        play("lose")
        bird.position = Point(100, 300)
        bird.velocity.y = 0
        score = 0
    }

    clear(cyan)
    print("Score: {score}")
}
