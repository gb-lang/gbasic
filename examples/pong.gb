// Pong â€” a simple paddle + ball game
Screen.Init(800, 600)

let paddle_x = 350
let paddle_y = 550
let paddle_w = 100
let paddle_h = 20

let ball_x = 400.0
let ball_y = 300.0
let ball_vx = 3.0
let ball_vy = 3.0
let ball_size = 10

let score = 0

while true {
    System.FrameBegin()

    if Input.KeyPressed("left") and paddle_x > 0 {
        paddle_x = paddle_x - 8
    }
    if Input.KeyPressed("right") and paddle_x < 700 {
        paddle_x = paddle_x + 8
    }

    ball_x = ball_x + ball_vx
    ball_y = ball_y + ball_vy

    if ball_x < 0.0 or ball_x > 790.0 {
        ball_vx = 0.0 - ball_vx
    }
    if ball_y < 0.0 {
        ball_vy = 0.0 - ball_vy
    }

    if ball_y > 600.0 {
        ball_x = 400.0
        ball_y = 300.0
        score = 0
    }

    if ball_y > 540.0 and ball_y < 570.0 {
        if ball_x > paddle_x and ball_x < paddle_x + paddle_w {
            ball_vy = 0.0 - ball_vy
            score = score + 1
        }
    }

    Screen.Clear(0, 0, 0)
    Screen.DrawRect(paddle_x, paddle_y, paddle_w, paddle_h, 255, 255, 255)
    Screen.DrawCircle(ball_x, ball_y, ball_size, 255, 255, 0)
    Screen.Present()

    System.FrameEnd()
}
