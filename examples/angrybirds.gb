// Angry Birds — launch a bird to hit the pig

let ground = rect(800, 40)
ground.position = Point(0, 560)
ground.color = green
ground.solid = true

let bird = circle(15)
bird.position = Point(120, 480)
bird.color = red

let pig = circle(18)
pig.position = Point(565, 380)
pig.color = green
pig.gravity = 0.3

let launched = false
let score = 0

while true {
    // Launch bird with space
    if not launched and key("space") {
        bird.velocity = Point(8, -10)
        bird.gravity = 0.4
        launched = true
        play("launch")
    }

    // Bird hits pig
    if bird.collides(pig) {
        pig.remove()
        score = score + 1
        play("squeal")
    }

    // Bird off screen — reset
    if launched and bird.position.x > 800 {
        bird.position = Point(120, 480)
        bird.velocity = Point(0, 0)
        bird.gravity = 0
        launched = false
    }

    clear(cyan)
    print("Score: {score}")
}
